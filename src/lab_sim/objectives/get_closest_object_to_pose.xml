<?xml version="1.0" encoding="UTF-8" ?>
<root BTCPP_format="4" main_tree_to_execute="Get Closest Object to Pose">
  <BehaviorTree
    ID="Get Closest Object to Pose"
    _description="Get the closest object the pose"
    _favorite="false"
  >
    <Control ID="Sequence" name="TopLevelSequence">
      <Action
        ID="GetPointsFromUser"
        pixel_coords="{pixel_coords}"
        view_name="/wrist_camera/color"
        point_names="object"
        point_prompts="Click on object"
      />
      <Action
        ID="GetPointCloud"
        message_out="{point_cloud}"
        publisher_timeout_sec="5.000000"
        timeout_sec="5.000000"
        topic_name="/wrist_camera/points"
      />
      <Action
        ID="GetPoseFromPixelCoords"
        downsample_fraction="0.100000"
        neighbor_radius="0.100000"
        output_poses="{output_poses}"
        pixel_coords="{pixel_coords}"
        point_cloud="{point_cloud}"
      />
      <Decorator
        ID="ForEach"
        index="{index}"
        out="{out}"
        vector_in="{output_poses}"
      >
        <Control ID="Sequence">
          <Action
            ID="GetClosestObjectToPose"
            closest_object="{graspable_object}"
            distance_threshold="0.100000"
            objects="{objects}"
            pose="{out}"
          />
        </Control>
      </Decorator>
      <Action
        ID="UnpackGraspableObjectMessage"
        grasp_info="{grasp_info}"
        graspable_object="{graspable_object}"
        object="{object}"
        object_color="{object_color}"
      />
      <Action
        ID="UnpackCollisionObjectMessage"
        collision_object="{object}"
        header="{header}"
        id="{id}"
        mesh_poses="{mesh_poses}"
        meshes="{meshes}"
        operation="{operation}"
        plane_poses="{plane_poses}"
        planes="{planes}"
        pose="{pose}"
        primitive_poses="{primitive_poses}"
        primitives="{primitives}"
        subframe_names="{subframe_names}"
        subframe_poses="{subframe_poses}"
        type="{type}"
      />
    </Control>
  </BehaviorTree>
  <TreeNodesModel>
    <SubTree ID="Get Closest Object to Pose">
      <inout_port name="objects" default="{objects}" />
      <inout_port name="graspable_object" default="{graspable_object}" />
      <inout_port name="id" default="{id}" />
    </SubTree>
  </TreeNodesModel>
</root>
