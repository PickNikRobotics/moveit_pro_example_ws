<?xml version="1.0" encoding="UTF-8" ?>
<root
  BTCPP_format="4"
  main_tree_to_execute="Pick up Collision Object in Planning Scene"
>
  <!--//////////-->
  <BehaviorTree ID="Pick up Collision Object in Planning Scene" _description="">
    <Control ID="Sequence" name="">
      <Action
        ID="InitializeMTCTask"
        task="{mtc_task}"
        timeout="-1.000000"
        trajectory_monitoring="false"
        controller_names="joint_trajectory_controller"
        task_id="move box"
      />
      <Action
        ID="CreateStampedPose"
        reference_frame="world"
        stamped_pose="{stamped_pose}"
      />
      <Action
        ID="GenerateCuboidGraspPoses"
        end_effector_group_name="gripper"
        generate_x_axis_grasps="true"
        generate_y_axis_grasps="true"
        generate_z_axis_grasps="true"
        grasp_poses="{grasp_poses}"
        max_grasp_width="0.1"
        samples_per_quadrant="3"
        target_object="{graspable_collision_object}"
        ee_to_tcp_tf="{stamped_pose}"
      />
      <Action ID="SetupMTCCurrentState" task="{mtc_task}" />
      <Action
        ID="SetupMTCConnectWithTrajectory"
        constraints="{constraints}"
        planner_interface="pro_rrt"
        planning_group_name="manipulator"
        task="{mtc_task}"
      />
      <Action
        ID="SetupMTCBatchPoseIK"
        end_effector_group="moveit_ee"
        end_effector_link="{link_name}"
        ik_group="manipulator"
        ik_timeout_s="0.01"
        max_ik_solutions="1"
        monitored_stage="current state"
        target_poses="{grasp_poses}"
        task="{mtc_task}"
      />
      <Action
        ID="SetupMTCAttachObject"
        frame_id="{link_name}"
        object="{graspable_collision_object}"
        task="{mtc_task}"
      />
      <Action ID="PlanMTCTask" solution="{mtc_solution}" task="{mtc_task}" />
      <Action
        ID="ExecuteMTCTask"
        goal_duration_tolerance="-1.000000"
        solution="{mtc_solution}"
      />
    </Control>
  </BehaviorTree>
  <TreeNodesModel>
    <SubTree ID="Pick up Collision Object in Planning Scene">
      <MetadataFields>
        <Metadata runnable="false" />
        <Metadata subcategory="Application - Advanced Examples" />
      </MetadataFields>
      <inout_port
        name="graspable_collision_object"
        default="{graspable_collision_object}"
      />
      <inout_port name="link_name" default="grasp_link" />
    </SubTree>
  </TreeNodesModel>
</root>
