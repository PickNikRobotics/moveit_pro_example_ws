<?xml version='1.0' encoding='UTF-8'?>
<root BTCPP_format="4" main_tree_to_execute="Demo - ML Move Boxes to Loading Zone">
  <BehaviorTree ID="Demo - ML Move Boxes to Loading Zone" _description="Move all of the boxes into the loading zone using ML perception. Reset and repeat in a loop." _favorite="true">
    <Control ID="Sequence">
      <Decorator ID="Repeat" num_cycles="-1">
        <Control ID="Sequence">
          <Action ID="CreateStampedPose" reference_frame="world" stamped_pose="{place_pose}" orientation_xyzw="0;1.0;0;0" position_xyz="-4.5;8.4;0.5"/>
          <Decorator ID="ForceSuccess">
            <Decorator ID="RetryUntilSuccessful" num_attempts="7">
              <Decorator ID="ForceFailure">
                <Control ID="Sequence">
                  <Control ID="Fallback">
                    <SubTree ID="Move Boxes to Loading Zone Start from Waypoint" waypoint_name="View Boxes" _collapsed="true" threshold="0.25" prompt="a small brown box" negative_prompts="yellow ladder;" prompts="small boxes" place_pose="{place_pose}" erosion_size="10"/>
                    <SubTree ID="Move Boxes to Loading Zone Start from Waypoint" waypoint_name="View Boxes 2" place_pose="{place_pose}" threshold="0.4" _collapsed="true" prompts="small boxes" negative_prompts="gray;gray;rails" erosion_size="2" prompt="{prompt}"/>
                  </Control>
                  <Action ID="TransformPose" input_pose="{place_pose}" output_pose="{place_pose}" translation_xyz="0.4;0;0"/>
                </Control>
              </Decorator>
            </Decorator>
          </Decorator>
          <Decorator ID="ForceSuccess">
            <SubTree ID="Move to Waypoint" _collapsed="true" acceleration_scale_factor="1.0" controller_action_server="/joint_trajectory_controller/follow_joint_trajectory" controller_names="joint_trajectory_controller" joint_group_name="manipulator" keep_orientation="false" keep_orientation_tolerance="0.05" link_padding="0.0" seed="0" velocity_scale_factor="1.0" waypoint_name="Initial Pose"/>
          </Decorator>
          <SubTree ID="Reset MuJoCo Sim" _collapsed="true"/>
        </Control>
      </Decorator>
    </Control>
  </BehaviorTree>
  <TreeNodesModel>
    <SubTree ID="Demo - ML Move Boxes to Loading Zone"/>
  </TreeNodesModel>
</root>
